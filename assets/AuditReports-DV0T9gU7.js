import{j as e,u as D,r as u,B as N,d as R}from"./index-HrsMpCM_.js";import{F as w,H as L,S as F,b as E,c as $}from"./Footer-FYM8eH7L.js";import{C as B}from"./Container-hb_Q086h.js";import{M as O}from"./Modal-DabBXL1d.js";import{D as z,P as f,p as t,V as m,T as a,A as C,d as M,C as U,F as H}from"./pdfStyles-DNV5T4zk.js";import{B as S,U as V,a as Q,A as W,S as q,P as Y}from"./user-BxZUKKDQ.js";import{D as G,C as K}from"./dollar-sign-1782qZ4z.js";import{R as A,T,C as _}from"./CategoricalChart-Dkuv5B8u.js";import{B as X,X as J,Y as Z,a as ee}from"./BarChart-CNyoMJk9.js";import{C as te}from"./CartesianGrid-CkACOMyZ.js";import{P as ae,a as se}from"./PieChart-BVA4-uCu.js";import{L as re}from"./Legend-CcaQIbt3.js";import"./diverging-BnhnGJO2.js";import"./string-DDEcaJAX.js";import"./with-selector-BHmUTRn5.js";const ie={id:"AUDIT-2024-001",title:"Pre-Implementation System Audit Report",category:"operational",auditPeriod:"Q1 2024",auditor:"Internal Audit Team",department:"General",auditDate:"2024-03-20",status:"completed",content:{executiveSummary:"Critical assessment of current manual processes prior to system implementation.",auditScope:"All departments (Finance, HR, Sales, Operations, Inventory)",methodology:"Interviews, document review, process observation",findings:["Critical risks in all manual workflows","Data integrity issues"],recommendations:["Immediate system implementation","Digitization of all records"],actionPlan:[],conclusion:"System implementation is critical for survival and scalability.",appendices:["Departmental Raw Data"],detailedExecSummary:{overallScore:38,riskLevel:"Critical",summary:"The current manual management system relies heavily on fragmented Word and Excel files, lacking version control, automated validation, and secure storage. Critical dependencies on individual knowledge and lack of standardized workflows pose significant operational and financial risks.",criticalFindingsCount:12},departmentAssessments:[{name:"Finance",score:42,complianceLevel:"Low",keyIssues:["Manual invoice processing","Lack of real-time budget tracking","High risk of duplicate payments"],riskTrend:"Worsening"},{name:"HR",score:45,complianceLevel:"Partial",keyIssues:["Paper-based leave requests","Inconsistent performance tracking","Scattered employee records"],riskTrend:"Stable"},{name:"Sales",score:35,complianceLevel:"Low",keyIssues:["No centralized CRM","Lost customer quotations","Slow order processing time"],riskTrend:"Worsening"},{name:"Operations",score:40,complianceLevel:"Low",keyIssues:["Manual checklist tracking","No incident reporting integration","Inefficient resource allocation"],riskTrend:"Stable"},{name:"Inventory",score:28,complianceLevel:"Critical",keyIssues:["Stock discrepancies","Manual reordering processes","Lack of movement tracking"],riskTrend:"Worsening"}],riskAnalysis:[{category:"Operational",score:85,probability:"High",impact:"Severe",mitigationStrategy:"Implement centralized management system with automated workflows"},{category:"Financial",score:75,probability:"Medium",impact:"Severe",mitigationStrategy:"Automate financial controls and validation rules"},{category:"Compliance",score:60,probability:"Medium",impact:"Moderate",mitigationStrategy:"Standardize document templates and improve record retention"},{category:"Reputational",score:50,probability:"Low",impact:"Moderate",mitigationStrategy:"Improve service delivery consistency and response times"}],costBenefitAnalysis:{investment:[{item:"Software Development & Implementation",cost:75e3},{item:"Hardware & Infrastructure",cost:15e3},{item:"Training & Change Management",cost:1e4},{item:"Data Migration",cost:15e3}],benefits:[{item:"Reduced Admin Time (20h/week)",annualValue:125e3,type:"Tangible"},{item:"Eliminated Printing/Paper Costs",annualValue:25e3,type:"Tangible"},{item:"Error Reduction & Recovery",annualValue:5e4,type:"Tangible"},{item:"Improved Decision Making",annualValue:1e5,type:"Intangible"},{item:"Customer Satisfaction Increase",annualValue:75e3,type:"Intangible"}],roi:226,paybackPeriod:"3.7"},detailedFindings:[{id:"FIND-FIN-001",department:"Finance",category:"Process Control",severity:"Critical",description:"No automated validation for purchase orders and invoice matching.",evidence:"Review of 50 recent POs showed 15% discrepancy rate manually corrected.",impact:{category:"Financial",description:"Risk of overpayment and duplicate payments.",estimatedCost:"15,000 TND / Year"},recommendation:"Implement automated 3-way matching in new system.",priority:"Immediate",status:"Open"},{id:"FIND-HR-001",department:"HR",category:"Data Security",severity:"High",description:"Employee records stored in unlocked physical cabinets and unencrypted local folders.",evidence:"Physical site inspection and IT audit of local drives.",impact:{category:"Compliance",description:"Violation of detailed data protection regulations.",estimatedCost:"Potential Fines"},recommendation:"Digitize all records to secure, role-based access database.",priority:"Immediate",status:"Open"},{id:"FIND-SAL-001",department:"Sales",category:"Efficiency",severity:"Medium",description:"Quotation generation takes average 45 minutes due to manual formatting.",evidence:"Time-motion study of sales team workflow.",impact:{category:"Operational",description:"Reduced sales throughput and delayed customer response.",estimatedCost:"500 Man-hours / Year"},recommendation:"Use standardized, auto-populated quotation templates.",priority:"Short-term",status:"Open"},{id:"FIND-INV-001",department:"Inventory",category:"Asset Management",severity:"Critical",description:"Inventory levels tracked in shared Excel sheet with no history log.",evidence:"Excel file metadata shows multiple conflicting edits.",impact:{category:"Financial",description:"Stockouts and shrinkage inability to trace.",estimatedCost:"30,000 TND / Year"},recommendation:"Implement real-time inventory tracking with transaction logs.",priority:"Immediate",status:"Open"},{id:"FIND-OPS-001",department:"Operations",category:"Quality Assurance",severity:"High",description:"Daily checklists are paper-based and often filed weekly, delaying issue visibility.",evidence:"Review of maintenance logs vs. incident reports.",impact:{category:"Operational",description:"Delayed maintenance leading to equipment downtime.",estimatedCost:"25,000 TND / Year"},recommendation:"Digitize daily checklists for instant submission and analytics.",priority:"Immediate",status:"Open"}]}},I=[{id:"financial",name:"Financial Audit",description:"Review of financial records, transactions, and statements.",icon:"DollarSign",color:"from-emerald-500 to-teal-600",reportCount:12},{id:"operational",name:"Operational",description:"Assessment of operational processes and efficiency.",icon:"Activity",color:"from-blue-500 to-indigo-600",reportCount:18},{id:"compliance",name:"Compliance",description:"Adherence to internal policies and external regulations.",icon:"ShieldCheck",color:"from-orange-500 to-red-600",reportCount:8},{id:"hr",name:"HR & Culture",description:"Review of HR practices, culture, and employee satisfaction.",icon:"Users",color:"from-purple-500 to-pink-600",reportCount:6},{id:"it",name:"IT & Security",description:"Evaluation of IT infrastructure and cybersecurity measures.",icon:"Server",color:"from-cyan-500 to-blue-600",reportCount:9}],ne=()=>[{id:"ACT-101",description:"Update financial reconciliation process",responsible:"Finance Manager",deadline:"2024-03-01",priority:"high",status:"in-progress"},{id:"ACT-102",description:"Implement 2FA for all admin accounts",responsible:"IT Director",deadline:"2024-02-15",priority:"high",status:"completed"},{id:"ACT-103",description:"Revise remote work policy",responsible:"HR Head",deadline:"2024-04-10",priority:"medium",status:"pending"}],v=[ie,{id:"AUD-2024-001",title:"Q4 2023 Financial Statement Audit",category:"financial",auditPeriod:"Q4 2023",auditor:"External - Deloitte",department:"Finance",auditDate:"2024-01-15",status:"completed",content:{executiveSummary:"The financial statements present fairly, in all material respects, the financial position of WAVE IO.",auditScope:"Balance sheet, income statement, and cash flow statement for Q4 2023.",methodology:"Risk assessment, substantive testing, and analytical procedures.",findings:["Minor discrepancies in petty cash log","Delayed vendor payments in December"],recommendations:["Digitize petty cash tracking","Automate vendor payment schedule"],actionPlan:ne(),conclusion:"Satisfactory with minor improvements needed.",appendices:["Balance Sheet","Income Statement"]}},{id:"AUD-2024-002",title:"IT Security Infrastructure Review",category:"it",auditPeriod:"H2 2023",auditor:"Internal Security Team",department:"IT",auditDate:"2024-02-10",status:"in-progress",content:{executiveSummary:"Overall security posture is strong, but some legacy systems need patching.",auditScope:"Server infrastructure, firewall configs, and endpoint security.",methodology:"Vulnerability scanning and penetration testing.",findings:["Outdated firmware on Switch B","Weak passwords in dev environment"],recommendations:["Patch management cycle improvement","Enforce stronger password improvement"],actionPlan:[],conclusion:"Good progress, but vigilance required.",appendices:["Scan Report"]}},...Array.from({length:15}).map((d,o)=>({id:`AUD-2023-${100+o}`,title:`${["Inventory","HR Compliance","Sales Process","Safety","GDPR"][o%5]} Audit 2023`,category:["operational","hr","operational","compliance","compliance"][o%5],auditPeriod:`Q${o%4+1} 2023`,auditor:o%2===0?"Internal Audit":"External Consultant",department:["Operations","HR","Sales","Safety","Legal"][o%5],auditDate:new Date(2023,o,15).toISOString().split("T")[0],status:o<10?"completed":"draft",content:{executiveSummary:"Routine audit conducted with standard procedures.",auditScope:"Departmental operations and compliance.",methodology:"Interviews and document review.",findings:["Standard finding 1","Standard finding 2"],recommendations:["Recommendation 1"],actionPlan:[],conclusion:"Audit completed successfully.",appendices:[]}}))];function le({audit:d}){const o=d.content,i=o.detailedExecSummary,l=o.departmentAssessments??[],x=o.riskAnalysis??[],p=o.costBenefitAnalysis,y=o.detailedFindings??[];return e.jsxs(z,{children:[e.jsx(f,{size:"A4",style:t.page,children:e.jsxs(m,{style:[t.coverPage,{paddingTop:80}],children:[e.jsx(a,{style:t.coverCategory,children:"Audit Report"}),e.jsx(a,{style:t.coverTitle,children:d.title}),e.jsxs(a,{style:t.coverSubtitle,children:[d.id," · ",d.category," · ",d.auditPeriod," · ",d.auditDate]}),e.jsxs(a,{style:t.coverSubtitle,children:["Auditor: ",d.auditor]}),i&&e.jsxs(m,{style:{marginTop:24,alignItems:"center"},children:[e.jsx(a,{style:{fontSize:12,color:"#6b7280",marginBottom:4},children:"Overall Score"}),e.jsxs(a,{style:{fontSize:36,fontWeight:"bold",color:"#111827"},children:[i.overallScore,"/100"]}),e.jsxs(a,{style:{fontSize:11,color:"#6b7280",marginTop:4},children:[i.riskLevel," Risk"]})]})]})}),e.jsxs(f,{size:"A4",style:t.page,children:[e.jsxs(m,{style:t.header,fixed:!0,children:[e.jsx(a,{style:t.headerLeft,children:"SS PLUS"}),e.jsx(a,{style:t.headerRight,children:d.title})]}),e.jsxs(m,{style:{marginTop:32},children:[e.jsx(a,{style:t.sectionTitle,children:"Executive Summary"}),e.jsx(a,{style:t.paragraph,children:o.executiveSummary}),i&&e.jsxs(e.Fragment,{children:[e.jsx(a,{style:t.paragraph,children:i.summary}),e.jsxs(a,{style:t.paragraph,children:["Critical findings: ",i.criticalFindingsCount,". Risk level: ",i.riskLevel,"."]})]}),e.jsx(a,{style:[t.subsectionTitle,{marginTop:16}],children:"Scope"}),e.jsx(a,{style:t.paragraph,children:o.auditScope}),e.jsx(a,{style:t.subsectionTitle,children:"Methodology"}),e.jsx(a,{style:t.paragraph,children:o.methodology}),e.jsx(a,{style:t.subsectionTitle,children:"Conclusion"}),e.jsx(a,{style:t.paragraph,children:o.conclusion})]}),e.jsxs(m,{style:t.footer,fixed:!0,children:[e.jsxs(a,{children:["SS PLUS · ",d.title]}),e.jsx(a,{render:({pageNumber:r,totalPages:c})=>`Page ${r} of ${c}`})]})]}),l.length>0&&e.jsxs(f,{size:"A4",style:t.page,children:[e.jsxs(m,{style:t.header,fixed:!0,children:[e.jsx(a,{style:t.headerLeft,children:"SS PLUS"}),e.jsx(a,{style:t.headerRight,children:d.title})]}),e.jsxs(m,{style:{marginTop:32},children:[e.jsx(a,{style:t.sectionTitle,children:"Department Assessments"}),l.map((r,c)=>e.jsxs(m,{style:[t.section,{marginBottom:12}],children:[e.jsxs(a,{style:t.subsectionTitle,children:[r.name," — Score ",r.score," · ",r.complianceLevel]}),e.jsxs(a,{style:[t.paragraph,{marginBottom:4}],children:["Trend: ",r.riskTrend]}),r.keyIssues.map((j,h)=>e.jsxs(m,{style:t.listItem,children:[e.jsx(a,{style:t.bullet,children:"•"}),e.jsx(a,{style:t.paragraph,children:j})]},h))]},c))]}),e.jsxs(m,{style:t.footer,fixed:!0,children:[e.jsxs(a,{children:["SS PLUS · ",d.title]}),e.jsx(a,{render:({pageNumber:r,totalPages:c})=>`Page ${r} of ${c}`})]})]}),x.length>0&&e.jsxs(f,{size:"A4",style:t.page,children:[e.jsxs(m,{style:t.header,fixed:!0,children:[e.jsx(a,{style:t.headerLeft,children:"SS PLUS"}),e.jsx(a,{style:t.headerRight,children:d.title})]}),e.jsxs(m,{style:{marginTop:32},children:[e.jsx(a,{style:t.sectionTitle,children:"Risk Analysis"}),x.map((r,c)=>e.jsxs(m,{style:[t.section,{marginBottom:12}],children:[e.jsxs(a,{style:t.subsectionTitle,children:[r.category," — Score ",r.score]}),e.jsxs(a,{style:t.paragraph,children:["Probability: ",r.probability," · Impact: ",r.impact]}),e.jsx(a,{style:t.paragraph,children:r.mitigationStrategy})]},c))]}),e.jsxs(m,{style:t.footer,fixed:!0,children:[e.jsxs(a,{children:["SS PLUS · ",d.title]}),e.jsx(a,{render:({pageNumber:r,totalPages:c})=>`Page ${r} of ${c}`})]})]}),p&&e.jsxs(f,{size:"A4",style:t.page,children:[e.jsxs(m,{style:t.header,fixed:!0,children:[e.jsx(a,{style:t.headerLeft,children:"SS PLUS"}),e.jsx(a,{style:t.headerRight,children:d.title})]}),e.jsxs(m,{style:{marginTop:32},children:[e.jsx(a,{style:t.sectionTitle,children:"Cost–Benefit Analysis"}),e.jsx(a,{style:t.subsectionTitle,children:"Investment"}),p.investment.map((r,c)=>e.jsxs(m,{style:t.listItem,children:[e.jsx(a,{style:t.bullet,children:"•"}),e.jsxs(a,{style:t.paragraph,children:[r.item,": ",r.cost.toLocaleString()," TND"]})]},c)),e.jsx(a,{style:[t.subsectionTitle,{marginTop:12}],children:"Benefits"}),p.benefits.map((r,c)=>e.jsxs(m,{style:t.listItem,children:[e.jsx(a,{style:t.bullet,children:"•"}),e.jsxs(a,{style:t.paragraph,children:[r.item,": ",r.annualValue.toLocaleString()," TND/year (",r.type,")"]})]},c)),e.jsxs(a,{style:[t.paragraph,{marginTop:12,fontWeight:"bold"}],children:["ROI: ",p.roi,"% · Payback: ",p.paybackPeriod," years"]})]}),e.jsxs(m,{style:t.footer,fixed:!0,children:[e.jsxs(a,{children:["SS PLUS · ",d.title]}),e.jsx(a,{render:({pageNumber:r,totalPages:c})=>`Page ${r} of ${c}`})]})]}),e.jsxs(f,{size:"A4",style:t.page,children:[e.jsxs(m,{style:t.header,fixed:!0,children:[e.jsx(a,{style:t.headerLeft,children:"SS PLUS"}),e.jsx(a,{style:t.headerRight,children:d.title})]}),e.jsxs(m,{style:{marginTop:32},children:[e.jsx(a,{style:t.sectionTitle,children:"Findings"}),o.findings.map((r,c)=>e.jsxs(m,{style:t.listItem,children:[e.jsx(a,{style:t.bullet,children:"•"}),e.jsx(a,{style:t.paragraph,children:r})]},c)),y.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(a,{style:[t.subsectionTitle,{marginTop:16}],children:"Detailed Findings"}),y.map(r=>e.jsxs(m,{style:[t.section,{marginBottom:10}],children:[e.jsxs(a,{style:{fontSize:10,fontWeight:"bold",color:"#374151"},children:[r.id," · ",r.department," · ",r.severity]}),e.jsx(a,{style:t.paragraph,children:r.description}),e.jsxs(a,{style:[t.paragraph,{fontSize:10,color:"#6b7280"}],children:["Evidence: ",r.evidence]}),e.jsxs(a,{style:[t.paragraph,{fontSize:10}],children:["Recommendation: ",r.recommendation]})]},r.id))]}),e.jsx(a,{style:[t.sectionTitle,{marginTop:16}],children:"Recommendations"}),o.recommendations.map((r,c)=>e.jsxs(m,{style:t.listItem,children:[e.jsx(a,{style:t.bullet,children:"•"}),e.jsx(a,{style:t.paragraph,children:r})]},c))]}),e.jsxs(m,{style:t.footer,fixed:!0,children:[e.jsxs(a,{children:["SS PLUS · ",d.title]}),e.jsx(a,{render:({pageNumber:r,totalPages:c})=>`Page ${r} of ${c}`})]})]})]})}function de({isOpen:d,onClose:o,audit:i}){const{t:l}=D(),[x,p]=u.useState("overview"),[y,r]=u.useState(!1),c=async()=>{r(!0);try{const s=e.jsx(le,{audit:i}),g=`${i.id}-${i.title.toLowerCase().replace(/\s+/g,"-")}.pdf`;await M(s,g)}catch(s){console.error("Audit PDF export failed:",s)}finally{r(!1)}},j={completed:"text-green-600 bg-green-50 dark:bg-green-900/30 dark:text-green-400","in-progress":"text-orange-600 bg-orange-50 dark:bg-orange-900/30 dark:text-orange-400",draft:"text-gray-600 bg-gray-50 dark:bg-gray-800 dark:text-gray-400"}[i.status],h=!!i.content.detailedExecSummary,k=i.content.departmentAssessments?.map(s=>({name:s.name,score:s.score,risk:s.complianceLevel})),b=i.content.riskAnalysis?.map(s=>({name:s.category,score:s.score})),n=["#EF4444","#F97316","#EAB308","#22C55E"];return e.jsx(O,{isOpen:d,onClose:o,title:l("audit.modal.title"),size:"xl",children:e.jsxs("div",{className:"flex flex-col h-[80vh] max-h-[800px]",children:[e.jsxs("div",{className:"flex-none pb-6 border-b border-gray-100 dark:border-gray-800",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"p-4 bg-gray-100 dark:bg-gray-900 rounded-2xl text-gray-400",children:e.jsx(S,{className:"w-10 h-10"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-[10px] uppercase font-bold text-gray-500 tracking-widest",children:[l("audit.modal.id"),": ",i.id]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${j}`,children:l(`audit.status.${i.status}`)})]}),e.jsx("h4",{className:"text-2xl font-black text-gray-900 dark:text-white leading-tight",children:i.title}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:[i.category.toUpperCase()," • ",i.department," • ",i.auditDate]})]})]}),h&&i.content.detailedExecSummary&&e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 bg-primary-600 text-white rounded-2xl shadow-lg min-w-[120px]",children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest opacity-80",children:"Score"}),e.jsxs("span",{className:"text-4xl font-black",children:[i.content.detailedExecSummary.overallScore,"/100"]}),e.jsxs("span",{className:"text-xs font-medium bg-white/20 px-2 py-0.5 rounded mt-1",children:[l(`audit.risk.${i.content.detailedExecSummary.riskLevel.toLowerCase()}`)," ",l("audit.risk.level")]})]})]}),h&&e.jsx("div",{className:"flex gap-2 mt-6 overflow-x-auto pb-2 scrollbar-hide",children:[{id:"overview",label:l("audit.modal.tabs.overview"),icon:w},{id:"findings",label:l("audit.modal.tabs.findings"),icon:C},{id:"departments",label:l("audit.modal.tabs.departments"),icon:V},{id:"risks",label:l("audit.modal.tabs.risks"),icon:Q},{id:"roi",label:l("audit.modal.tabs.roi"),icon:G}].map(s=>e.jsxs("button",{onClick:()=>p(s.id),className:`
                                        flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-all
                                        ${x===s.id?"bg-primary-50 text-primary-600 dark:bg-primary-900/20 dark:text-primary-400":"text-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800"}
                                    `,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label]},s.id))})]}),e.jsx("div",{className:"flex-grow overflow-y-auto py-6 pr-2",children:h?e.jsxs("div",{className:"space-y-8",children:[x==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-6 bg-red-50 dark:bg-red-900/10 border border-red-100 dark:border-red-900/30 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(C,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),e.jsx("h5",{className:"font-bold text-red-900 dark:text-red-300",children:l("audit.modal.criticalIssues")})]}),e.jsx("p",{className:"text-red-800 dark:text-red-200 text-3xl font-black mb-1",children:i.content.detailedExecSummary?.criticalFindingsCount}),e.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 font-medium uppercase tracking-wide",children:l("audit.modal.highPriorityFindings")})]}),e.jsxs("div",{className:"p-6 bg-primary-50 dark:bg-primary-900/10 border border-primary-100 dark:border-primary-900/30 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(W,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"}),e.jsx("h5",{className:"font-bold text-primary-900 dark:text-primary-300",children:l("audit.modal.overallScore")})]}),e.jsxs("p",{className:"text-primary-800 dark:text-primary-200 text-3xl font-black mb-1",children:[i.content.detailedExecSummary?.overallScore,"/100"]}),e.jsx("p",{className:"text-xs text-primary-600 dark:text-primary-400 font-medium uppercase tracking-wide",children:l("audit.modal.systemReadiness")})]})]}),e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 border border-gray-100 dark:border-gray-700 rounded-2xl shadow-sm",children:[e.jsx("h5",{className:"text-sm font-black uppercase tracking-widest text-gray-400 mb-4",children:l("audit.modal.executiveSummary")}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:i.content.detailedExecSummary?.summary})]})]}),x==="findings"&&e.jsx("div",{className:"space-y-4",children:i.content.detailedFindings?.map(s=>e.jsxs("div",{className:"p-5 bg-white dark:bg-gray-800 border-l-4 border-l-red-500 rounded-r-xl shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 text-[10px] font-bold uppercase rounded",children:l(`audit.severity.${s.severity.toLowerCase()}`)}),e.jsx("span",{className:"text-xs text-gray-400 font-mono",children:s.id})]}),e.jsx("span",{className:"text-xs font-medium text-gray-500",children:s.department})]}),e.jsx("h5",{className:"font-bold text-gray-900 dark:text-white mb-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase block mb-1",children:l("audit.modal.evidence")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.evidence})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 rounded-lg",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase block mb-1",children:l("audit.modal.impact")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s.impact.description}),s.impact.estimatedCost&&e.jsxs("span",{className:"text-red-600 dark:text-red-400 text-xs font-bold mt-1 block",children:[l("audit.modal.cost"),": ",s.impact.estimatedCost]})]})]})]},s.id))}),x==="departments"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-64 w-full",children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(X,{data:k,children:[e.jsx(te,{strokeDasharray:"3 3",opacity:.1}),e.jsx(J,{dataKey:"name",fontSize:12}),e.jsx(Z,{domain:[0,100],fontSize:12}),e.jsx(T,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(ee,{dataKey:"score",fill:"#3B82F6",radius:[4,4,0,0]})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.content.departmentAssessments?.map(s=>e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h6",{className:"font-bold text-gray-900 dark:text-white",children:s.name}),e.jsxs("span",{className:`text-xs font-bold px-2 py-0.5 rounded ${s.score<40?"bg-red-100 text-red-700":s.score<70?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:[l("audit.modal.score"),": ",s.score]})]}),e.jsx("ul",{className:"space-y-1",children:s.keyIssues.map((g,P)=>e.jsxs("li",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400 mt-0.5",children:"•"}),g]},P))})]},s.name))})]}),x==="risks"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-64 w-full",children:e.jsx(A,{width:"100%",height:"100%",children:e.jsxs(ae,{children:[e.jsx(se,{data:b,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"score",children:b?.map((s,g)=>e.jsx(_,{fill:n[g%n.length]},`cell-${g}`))}),e.jsx(T,{}),e.jsx(re,{})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:i.content.riskAnalysis?.map(s=>e.jsxs("div",{className:"p-5 bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:`absolute top-0 right-0 w-24 h-24  transform translate-x-8 -translate-y-8 rounded-full opacity-10 ${s.impact==="Severe"?"bg-red-500":"bg-orange-500"}`}),e.jsxs("h6",{className:"font-bold text-gray-900 dark:text-white mb-4",children:[s.category," Risk"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:l("audit.modal.probability")}),e.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:s.probability})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:l("audit.modal.impact")}),e.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:s.impact})]}),e.jsxs("div",{className:"pt-3 mt-3 border-t border-gray-100 dark:border-gray-700",children:[e.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:l("audit.modal.mitigation")}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:s.mitigationStrategy})]})]})]},s.category))})]}),x==="roi"&&i.content.costBenefitAnalysis&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 rounded-xl text-center",children:[e.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-bold uppercase",children:l("audit.modal.roi")}),e.jsxs("p",{className:"text-3xl font-black text-emerald-700 dark:text-emerald-300",children:[i.content.costBenefitAnalysis.roi,"%"]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl text-center",children:[e.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-bold uppercase",children:l("audit.modal.payback")}),e.jsxs("p",{className:"text-3xl font-black text-blue-700 dark:text-blue-300",children:[i.content.costBenefitAnalysis.paybackPeriod,"m"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-bold text-gray-900 dark:text-white mb-4",children:l("audit.modal.investmentRequired")}),e.jsx("ul",{className:"space-y-3",children:i.content.costBenefitAnalysis.investment.map((s,g)=>e.jsxs("li",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.item}),e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[s.cost.toLocaleString()," TND"]})]},g))})]}),e.jsxs("div",{children:[e.jsx("h6",{className:"font-bold text-gray-900 dark:text-white mb-4",children:l("audit.modal.projectedBenefits")}),e.jsx("ul",{className:"space-y-3",children:i.content.costBenefitAnalysis.benefits.map((s,g)=>e.jsxs("li",{className:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/10 rounded-lg border border-green-100 dark:border-green-900/20",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:s.item}),e.jsx("span",{className:"text-[10px] text-green-600 dark:text-green-400 uppercase font-bold",children:s.type})]}),e.jsxs("span",{className:"font-bold text-green-700 dark:text-green-400",children:[s.annualValue.toLocaleString()," TND"]})]},g))})]})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-5 bg-gray-50 dark:bg-gray-900/50 rounded-2xl",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900 dark:text-white mb-2",children:l("audit.modal.executiveSummary")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm leading-relaxed",children:i.content.executiveSummary})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900 dark:text-white mb-3",children:l("audit.modal.keyFindings")}),e.jsx("ul",{className:"space-y-2",children:i.content.findings.map((s,g)=>e.jsxs("li",{className:"flex gap-3 text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"text-primary-500",children:"•"}),s]},g))})]})]})}),e.jsxs("div",{className:"flex-none pt-6 border-t border-gray-100 dark:border-gray-800 flex gap-3",children:[e.jsxs(N,{variant:"primary",className:"flex-1 flex justify-center gap-2",onClick:c,disabled:y,children:[y?e.jsx(R,{className:"w-4 h-4 animate-spin"}):e.jsx(w,{className:"w-4 h-4"}),l(y?"audit.modal.generatingPdf":"audit.modal.downloadFullPdf")]}),e.jsxs(N,{variant:"secondary",className:"flex justify-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),l("audit.modal.share")]})]})]})})}function we(){const[d,o]=u.useState("dashboard"),[i,l]=u.useState(""),[x,p]=u.useState("all"),[y,r]=u.useState(null),[c,j]=u.useState(!1),h=n=>{r(n),j(!0)},k=u.useMemo(()=>v.filter(n=>{const s=n.title.toLowerCase().includes(i.toLowerCase())||n.id.toLowerCase().includes(i.toLowerCase()),g=x==="all"||n.category===x;return s&&g}),[i,x]),b={total:v.length,completed:v.filter(n=>n.status==="completed").length,inProgress:v.filter(n=>n.status==="in-progress").length,draft:v.filter(n=>n.status==="draft").length};return e.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors duration-300",children:[e.jsx(L,{}),e.jsx("main",{className:"flex-grow py-8",children:e.jsxs(B,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2 font-heading",children:"Audit Reports"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Track compliance, view reports, and monitor action items."})]}),e.jsxs("div",{className:"flex bg-white dark:bg-gray-800 p-1 rounded-lg border border-gray-200 dark:border-gray-700 mt-4 md:mt-0",children:[e.jsx("button",{onClick:()=>o("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${d==="dashboard"?"bg-primary-50 dark:bg-primary-900/40 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Dashboard"}),e.jsx("button",{onClick:()=>o("reports"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${d==="reports"?"bg-primary-50 dark:bg-primary-900/40 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"All Reports"})]})]}),d==="dashboard"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Audits"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:b.total})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-blue-600 dark:text-blue-400",children:e.jsx(S,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-500 mt-1",children:b.completed})]}),e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg text-green-600 dark:text-green-400",children:e.jsx(U,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-500 mt-1",children:b.inProgress})]}),e.jsx("div",{className:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg text-orange-600 dark:text-orange-400",children:e.jsx(K,{className:"w-6 h-6"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Drafts"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600 dark:text-gray-300 mt-1",children:b.draft})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/30 rounded-lg text-gray-600 dark:text-gray-400",children:[e.jsx(w,{className:"w-6 h-6"})," "]})]})})]}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Audit Categories"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:I.map(n=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg bg-gradient-to-br ${n.color} flex items-center justify-center mb-4`,children:e.jsx(Y,{className:"text-white w-6 h-6"})}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:n.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[n.reportCount," Reports"]})]},n.id))})]}),d==="reports"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl border border-gray-200 dark:border-gray-700 flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(F,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search audits...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 focus:outline-none focus:ring-2 focus:ring-primary-500 text-gray-900 dark:text-white",value:i,onChange:n=>l(n.target.value)})]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsxs("select",{className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 appearance-none focus:outline-none focus:ring-2 focus:ring-primary-500 text-gray-900 dark:text-white",value:x,onChange:n=>p(n.target.value),children:[e.jsx("option",{value:"all",children:"All Categories"}),I.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]})]}),e.jsx("div",{className:"space-y-4",children:k.map(n=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-xl border border-gray-200 dark:border-gray-700 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:border-primary-500 dark:hover:border-primary-500 transition-colors cursor-pointer group",onClick:()=>h(n),children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-gray-100 dark:bg-gray-700 group-hover:bg-primary-50 dark:group-hover:bg-primary-900/20 transition-colors",children:e.jsx(S,{className:"w-6 h-6 text-gray-500 dark:text-gray-400 group-hover:text-primary-600 dark:group-hover:text-primary-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400",children:n.id}),e.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-medium uppercase ${n.status==="completed"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":n.status==="in-progress"?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"}`,children:n.status})]}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:n.title}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[n.category.toUpperCase()," • ",n.department," • ",n.auditor]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(E,{className:"w-4 h-4 mr-1"}),n.auditDate]}),e.jsx(N,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),h(n)},children:"View Report"})]})]},n.id))})]}),y&&e.jsx(de,{isOpen:c,onClose:()=>j(!1),audit:y})]})}),e.jsx($,{})]})}export{we as default};
